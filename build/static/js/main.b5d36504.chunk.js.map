{"version":3,"sources":["forms/AccountList.js","forms/AccountItem.js","structure.js","icons.js","AppClient.js","index.js","translations.js"],"names":["Form","args","actions","disabled","elements","unshift","type","Elements","GRID","LABEL","title","style","textAlign","marginTop","getElement","name","Fields","REFERENCE","entity","onChange","val","projectChange","app","currentProject","filters","projectUuid","uuid","get","value","project","this","content","__Add","allow","load","forEach","action","index","length","hidden","tag","id","ProjectRole","fields","STRING","Project","tables","Account","structures","ProjectList","xmlns","version","width","height","viewBox","d","ProjectRoleList","AccountList","AppClient","parent","params","baseUrl","env","apiUrl","init","addToMenu","forms","AccountItem","saveAuth","menu","menuItem","form","rule","method","icons","icon","use","AppUser","package","KateJSClient","translations","undefined"],"mappings":"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","file":"static/js/main.b5d36504.chunk.js","sourcesContent":["import { Elements, getElement } from 'katejs/lib/client';\r\nimport Fields from 'katejs/lib/fields';\r\n\r\nexport default Form => class AccountList extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n    this.actions[0].disabled = true;\r\n    this.elements.unshift({\r\n      type: Elements.GRID,\r\n      elements: [\r\n        {\r\n          type: Elements.LABEL,\r\n          title: 'Select project:',\r\n          style: { textAlign: 'right', marginTop: '30px' },\r\n        },\r\n        {\r\n          ...getElement({ name: 'project', type: Fields.REFERENCE, entity: 'Project' }, this),\r\n          onChange: val => this.projectChange(val),\r\n        },\r\n      ],\r\n    });\r\n    if (this.app.currentProject) {\r\n      this.filters = { projectUuid: this.app.currentProject.uuid };\r\n      this.elements.get('project').value = this.app.currentProject;\r\n      this.actions[0].disabled = false;\r\n    }\r\n  }\r\n\r\n  projectChange(project) {\r\n    this.filters = { projectUuid: project && project.uuid };\r\n    if (!project) this.filters = {};\r\n    this.content.__Add.disabled = !project || !this.app.allow('Account', 'put');\r\n    // to use in edit form\r\n    this.app.currentProject = project;\r\n    this.load();\r\n  }\r\n};\r\n","import { Elements } from 'katejs/lib/client';\r\n\r\nexport default Form => class AccountItem extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n\r\n    this.elements.get('project').value = this.app.currentProject;\r\n    if (!this.app.allow('Account', 'put')) {\r\n      // user can only view\r\n      this.actions.forEach((action, index) => {\r\n        if (index === this.actions.length - 1) return;\r\n        // eslint-disable-next-line no-param-reassign\r\n        action.hidden = true;\r\n      });\r\n      // value will be set by id\r\n      this.elements = [\r\n        {\r\n          type: Elements.LABEL,\r\n          tag: 'h3',\r\n          id: 'title',\r\n        },\r\n        {\r\n          type: Elements.LABEL,\r\n          id: 'description',\r\n        },\r\n        {\r\n          type: Elements.GRID,\r\n          elements: [\r\n            {\r\n              type: Elements.LABEL,\r\n              title: 'Uri',\r\n            },\r\n            {\r\n              type: Elements.LABEL,\r\n              id: 'uri',\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          type: Elements.GRID,\r\n          elements: [\r\n            {\r\n              type: Elements.LABEL,\r\n              title: 'Login',\r\n            },\r\n            {\r\n              type: Elements.LABEL,\r\n              id: 'login',\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          type: Elements.GRID,\r\n          elements: [\r\n            {\r\n              type: Elements.LABEL,\r\n              title: 'Password',\r\n            },\r\n            {\r\n              type: Elements.LABEL,\r\n              id: 'password',\r\n            },\r\n          ],\r\n        },\r\n      ];\r\n    }\r\n  }\r\n};\r\n","import Fields from 'katejs/lib/fields';\r\n\r\nconst ProjectRole = {\r\n  fields: [\r\n    {\r\n      name: 'title',\r\n      type: Fields.STRING,\r\n    },\r\n  ],\r\n};\r\n\r\nconst Project = {\r\n  fields: [\r\n    {\r\n      name: 'title',\r\n      type: Fields.STRING,\r\n    },\r\n  ],\r\n  tables: [\r\n    {\r\n      name: 'users',\r\n      fields: [\r\n        {\r\n          name: 'user',\r\n          type: Fields.REFERENCE,\r\n          entity: 'User',\r\n        },\r\n        {\r\n          name: 'role',\r\n          type: Fields.REFERENCE,\r\n          entity: 'ProjectRole',\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n};\r\n\r\nconst Account = {\r\n  fields: [\r\n    {\r\n      name: 'title',\r\n      type: Fields.STRING,\r\n    },\r\n    {\r\n      name: 'project',\r\n      type: Fields.REFERENCE,\r\n      entity: 'Project',\r\n    },\r\n    {\r\n      name: 'description',\r\n      type: Fields.STRING,\r\n    },\r\n    {\r\n      name: 'url',\r\n      type: Fields.STRING,\r\n    },\r\n    {\r\n      name: 'login',\r\n      type: Fields.STRING,\r\n    },\r\n    {\r\n      name: 'password',\r\n      type: Fields.STRING,\r\n    },\r\n  ],\r\n  tables: [\r\n    {\r\n      name: 'availableFor',\r\n      fields: [\r\n        {\r\n          name: 'role',\r\n          type: Fields.REFERENCE,\r\n          entity: 'ProjectRole',\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n};\r\n\r\n\r\nexport const title = 'Passstore';\r\nexport const packageName = 'passstore_app';\r\nexport const structures = {\r\n  ProjectRole,\r\n  Project,\r\n  Account,\r\n};\r\n","// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport React from 'react';\r\n\r\nconst ProjectList = () => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M9,5V9H21V5M9,19H21V15H9M9,14H21V10H9M4,9H8V5H4M4,19H8V15H4M4,14H8V10H4V14Z\" />\r\n  </svg>\r\n);\r\n\r\nconst ProjectRoleList = () => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M13.07 10.41A5 5 0 0 0 13.07 4.59A3.39 3.39 0 0 1 15 4A3.5 3.5 0 0 1 15 11A3.39 3.39 0 0 1 13.07 10.41M5.5 7.5A3.5 3.5 0 1 1 9 11A3.5 3.5 0 0 1 5.5 7.5M7.5 7.5A1.5 1.5 0 1 0 9 6A1.5 1.5 0 0 0 7.5 7.5M16 17V19H2V17S2 13 9 13 16 17 16 17M14 17C13.86 16.22 12.67 15 9 15S4.07 16.31 4 17M15.95 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13Z\" />\r\n  </svg>\r\n);\r\n\r\nconst AccountList = () => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n    <path d=\"M6.5,2C8.46,2 10.13,3.25 10.74,5H22V8H18V11H15V8H10.74C10.13,9.75 8.46,11 6.5,11C4,11 2,9 2,6.5C2,4 4,2 6.5,2M6.5,5A1.5,1.5 0 0,0 5,6.5A1.5,1.5 0 0,0 6.5,8A1.5,1.5 0 0,0 8,6.5A1.5,1.5 0 0,0 6.5,5M6.5,13C8.46,13 10.13,14.25 10.74,16H22V19H20V22H18V19H16V22H13V19H10.74C10.13,20.75 8.46,22 6.5,22C4,22 2,20 2,17.5C2,15 4,13 6.5,13M6.5,16A1.5,1.5 0 0,0 5,17.5A1.5,1.5 0 0,0 6.5,19A1.5,1.5 0 0,0 8,17.5A1.5,1.5 0 0,0 6.5,16Z\" />\r\n  </svg>\r\n);\r\n\r\nexport default {\r\n  ProjectList,\r\n  ProjectRoleList,\r\n  AccountList,\r\n};\r\n","import { use } from 'katejs/lib/client';\r\nimport { AppUser } from 'katejs-modules/lib/client';\r\n\r\nimport AccountList from './forms/AccountList';\r\nimport AccountItem from './forms/AccountItem';\r\n\r\nimport { structures, title, packageName } from './structure';\r\nimport env from './front.env.json';\r\nimport icons from './icons';\r\n\r\nconst AppClient = parent => class Client extends use(parent, AppUser) {\r\n  static title = title;\r\n\r\n  constructor(params) {\r\n    super(params);\r\n    this.baseUrl = env.apiUrl || '/api';\r\n\r\n    this.init({ structures, addToMenu: true });\r\n\r\n    this.forms = {\r\n      ...this.forms,\r\n      AccountList: AccountList(this.forms.AccountList),\r\n      AccountItem: AccountItem(this.forms.AccountItem),\r\n    };\r\n\r\n    this.saveAuth = true;\r\n    this.menu.forEach((menuItem) => {\r\n      if (this.forms[menuItem.form].entity && this.forms[menuItem.form].entity !== 'Account') {\r\n        // eslint-disable-next-line no-param-reassign\r\n        menuItem.rule = {\r\n          entity: this.forms[menuItem.form].entity,\r\n          method: 'put',\r\n        };\r\n      }\r\n      if (icons[menuItem.form]) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        menuItem.icon = icons[menuItem.form];\r\n      }\r\n    });\r\n\r\n    // Admin <- Role.put\r\n    // PM <- Project.put\r\n    // User <- !Account.put\r\n  }\r\n};\r\nAppClient.package = packageName;\r\nexport default AppClient;\r\n","import KateJSClient from 'katejs/lib/client';\r\n\r\nimport AppClient from './AppClient';\r\nimport translations from './translations';\r\n\r\nKateJSClient({ AppClient, translations });\r\n","// import { translations } from 'katejs/lib/client';\r\n\r\n/* eslint-disable quote-props */\r\nconst translate = undefined;\r\n// {\r\n//   languages: ['ru'],\r\n//   ru: {\r\n//     ...translations.ru,\r\n//     'Tasks': 'Задачи',\r\n//   },\r\n// };\r\n\r\nexport default translate;\r\n"],"sourceRoot":""}